div.row
  div.span9
    //h6 Add a question
    button.btn(type="button", ng-click = "showNewQuestion = true", ng-show = "!showNewQuestion") Add a question
    div(ng-show = "showNewQuestion")
      tags(tags = 'newQuestion.tags', url = '/api/tags')
      br
      textarea(ng-model = "newQuestion.content")
      br
      div.btn-group
        button.btn.btn-primary(type="button", ng-click = "createQuestion()") Add Question
        button.btn(type="button", ng-click = "showNewQuestion = false", ng-show = "showNewQuestion") cancel
      
div.row
  div.span9
    ul
      li(ng-repeat = "tag in question.tags")
        | {{ tag.name }}
    img(ng-src = "{{ question._creator | userIconPic }}")
    | {{ question._creator.name }}
    | {{ question.createdAt | fromNow }}
    div
      | {{ question.content }}
    
    div.comment(ng-repeat =  'comment in question.comments')
      h5 {{comment._creator.name}}
      p(ng-bind-html = 'comment.content')
    
    div(ng-controller = 'newQuestionCommentCtrl')
      a(ng-show = "!reply", ng-click="reply = true") Comment
      div.footer(ng-show = "reply")
        textarea(ng-model = "newComment.content") 
        br
        button.btn.btn-primary(ng-click="createComment()") Post 
        button.btn(ng-click="reply = false") Cancel

 // creating answers
div.row
  div.span9
    h6 Add an answer
    button.btn(type="button", ng-click = "showNewAnswer = true", ng-show = "!showNewAnswer") Add an answer
    div(ng-show = "showNewAnswer")
      textarea(ng-model = "newAnswer.content")
      br
      div.btn-group
        button.btn.btn-primary(type="button", ng-click = "createAnswer()") Add Answer
        button.btn(type="button", ng-click = "showNewAnswer = false", ng-show = "showNewAnswer") cancel
  
  
  // Showing answers
div.row
  div.span9
    div(ng-repeat = 'answer in question.answers')
      div.btn-group.btn-group-vertical
        button.btn(type="button", ng-disabled = "alreadyVoted(answer)", ng-click = "up(answer)")
          i.icon-sort-up
        button.btn(type="button", ng-disabled = "alreadyVoted(answer)", ng-click = "down(answer)")
          i.icon-sort-down
      h4
        | Votes {{ answer.totalVotes }}
        img(ng-src = "{{ question._creator | userIconPic }}")
        | {{ question._creator.name }}
        | {{ question.createdAt | fromNow }}
      p
        | {{ answer.content }}
      // comments for the main question 
    
      div.comment(ng-repeat =  'comment in answer.comments')
        h5 
          | {{comment._creator.name}}
          | {{ comment.createdAt | fromNow }}
        p(ng-bind-html = 'comment.content')
      
      div(ng-controller = 'newQuestionCommentCtrl')
        a(ng-show = "!reply", ng-click="reply = true") Comment
        div.footer(ng-show = "reply")
          textarea(ng-model = "newComment.content") 
          br
          button.btn.btn-primary(ng-click="createCommentToAnswer(answer)") Post 
          button.btn(ng-click="reply = false") Cancel
          
        
          
div(paginate, new-page-target = "questions", url = "", ng-show = "questions.length > 9")  
          
  
