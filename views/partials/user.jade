
h3 Welcome {{currentUser.name}} 

div.row 
  div.span4
    legend Yourself
    label
      | Your Name
    div.input-prepend
      span.add-on
        i.icon-user
      input(type='text', ng-model = "currentUser.name", class = 'span3' )
    br
    label
      | Your email
    div.input-prepend
      span.add-on
        i.icon-envelope
      input(type='text', ng-model = "currentUser.email", class = 'span3')
    br

      
    Legend(help, open = "showLocationWidget", templatename = 'locationPopup', action="getBrowserLocation()") Where are you?
    div(ng-show = "undoLocUpdate", class = "alert alert-success")
      |  Location updated
      button(class = "close", ng-click="undoLocUpdate = 'false'")&times;
  
    div.form-inline
      div.input-prepend
        span.add-on
          i.icon-globe
        input(type='text', ng-model = "currentUser.location.formattedAddress", ng-change = "getLocation()", placeholder="Your location", class = 'span3')
      button(type = 'button', ng-click="undoLocation()", class="btn btn-danger", ng-show = "undoLocUpdate") undo
    br
    div(ng-show='currentUser.location.country')
      p
        | There are xxx users registered in {{ currentUser.location.country.long }} 
          
    p(ng-show = "currentUser.location.formattedAddress.length > 0 && currentUser.location.formattedAddress.length < 5")
      small
        | Looking up your adress at Google. 
        br
        | This information is really only meant for your convenience, we are not doing anything with it.
        br 
        | So if you'd rather not disclose your full adrress, no problem!
  
    div(ng-show='locations')
      ul(ng-repeat='loc in locations', class="unstyled")
        li
          button(ng-click="validateAdress($index)", class="btn btn-success") Ok
          {{ loc.formatted_address }}
  

  div.span5
    legend Your profile picture
    div.row
      div.span3
        img#picture.well(width="200", ng-src="{{ currentUser | userPic }}")
      div.span2
        small
          | <strong>Drag & Drop</strong> the file onto the existing picture or
          br
          | Use the <strong>button</strong> to change your profile picture.
        br
        span.btn.btn-success.fileinput-button
          i.icon-plus.icon-white
          span 
            | New picture
            input(type="file", uploader, done='setProfilePicture(file)', data-url="/upload")
    

div.row
  div.span7
    legend Settings
      div
       label.checkbox
         input(type="checkbox", ng-model="researchAgreement")
         | Do you agree to have your data used for research purposes?
       label.checkbox
         input(type="checkbox", ng-model="currentUser.settings.createChildOptOut")
         | Until further notice, I do not want to create pages.
         
    button(type='button', ng-click="updateUser(false)", class='btn btn-primary') Update
    button(type='button', ng-click="cancelUpdate()", class='btn', title = 'All changes will be lost!') Cancel


        

